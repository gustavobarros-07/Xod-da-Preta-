Descrição linha a linha dos arquivos .py do projeto

Observação: Em trechos óbvios e blocos repetitivos, linhas consecutivas podem ser descritas em conjunto para manter a leitura objetiva. Comentários com acentuação corrompida foram mantidos com a intenção inferida pelo contexto.


# Xod-da-Preta-/app/models.py

- Linha 1: Importa `datetime` para registrar datas/hora em colunas.
- Linha 2: Importa a instância `db` (SQLAlchemy) do módulo `database`.
- Linha 3: Importa utilitários para gerar e verificar hash de senha.
- Linha 4: Linha em branco (organização).
- Linha 5: Linha em branco (organização).
- Linha 6: Define a classe `Subcategoria`, herda de `db.Model` (tabela ORM).
- Linha 7: Docstring do modelo `Subcategoria`.
- Linha 8: Define o nome da tabela como `subcategorias`.
- Linha 9: Linha em branco (separação).
- Linha 10: Coluna `id` (chave primária, inteiro).
- Linha 11: Coluna `nome` (string até 50, obrigatório).
- Linha 12: Coluna `categoria` (string até 50, obrigatório) — categoria pai.
- Linha 13: Coluna `ativo` (booleano, padrão True).
- Linha 14: Coluna `ordem` (inteiro, padrão 0) — ordenação personalizada.
- Linha 15: Coluna `data_criacao` (DateTime, padrão agora em UTC).
- Linha 16: Linha em branco.
- Linha 17: Comentário sobre relacionamento com produtos.
- Linha 18: Relacionamento ORM: uma `Subcategoria` tem muitos `Produto`; cria `backref` `subcategoria_obj`.
- Linha 19: Linha em branco.
- Linha 20: Início de `__repr__` para representação legível.
- Linha 21: Retorna representação textual contendo `categoria` e `nome`.
- Linha 22: Linha em branco.
- Linha 23: Início de `to_dict` (serialização para dicionário).
- Linha 24: Docstring do método `to_dict`.
- Linhas 25–31: Retorna dicionário com campos principais da subcategoria.
- Linha 32: Linha em branco.
- Linha 33: Linha em branco.
- Linha 34: Define a classe `Produto`, herda de `db.Model` (tabela ORM).
- Linha 35: Docstring do modelo `Produto`.
- Linha 36: Define o nome da tabela como `produtos`.
- Linha 37: Linha em branco.
- Linha 38: Coluna `id` (chave primária, inteiro).
- Linha 39: Coluna `nome` (string até 100, obrigatório).
- Linha 40: Coluna `descricao` (texto, opcional).
- Linha 41: Coluna `preco` (float, obrigatório).
- Linha 42: Coluna `categoria` (string até 50, obrigatório) — nível 1.
- Linha 43: Coluna `subcategoria` (string até 50, opcional) — nível 2.
- Linha 44: Coluna `tipo` (string até 50, opcional) — nível 3.
- Linha 45: Coluna `subcategoria_id` (FK para `subcategorias.id`, opcional) — legado.
- Linha 46: Coluna `tamanhos` (string até 200) contendo JSON textual de tamanhos.
- Linha 47: Coluna `imagem` (string até 200) com nome do arquivo.
- Linha 48: Coluna `ordem` (inteiro, padrão 0) — ordenação personalizada.
- Linha 49: Coluna `ativo` (booleano, padrão True) — controle de visibilidade.
- Linha 50: Coluna `data_criacao` (DateTime, padrão agora em UTC).
- Linha 51: Coluna `data_atualizacao` (DateTime, padrão agora + atualiza em updates).
- Linha 52: Linha em branco.
- Linha 53: Início de `__repr__` do produto.
- Linha 54: Retorna representação textual com o nome do produto.
- Linha 55: Linha em branco.
- Linha 56: Início de `to_dict` (serialização do produto).
- Linha 57: Docstring de `to_dict`.
- Linhas 58–73: Constrói dicionário com todos os campos relevantes; inclui `subcategoria_nome` via `backref` e formata `data_criacao`.
- Linha 74: Linha em branco.
- Linha 75: Linha em branco.
- Linha 76: Define a classe `Admin`, herda de `db.Model` (tabela ORM).
- Linha 77: Docstring do modelo `Admin`.
- Linha 78: Define o nome da tabela como `admins`.
- Linha 79: Linha em branco.
- Linha 80: Coluna `id` (chave primária, inteiro).
- Linha 81: Coluna `username` (string até 80, único, obrigatório).
- Linha 82: Coluna `password_hash` (string até 200, obrigatório).
- Linha 83: Coluna `email` (string até 120, único, opcional).
- Linha 84: Coluna `data_criacao` (DateTime, padrão agora em UTC).
- Linha 85: Coluna `ultimo_login` (DateTime, opcional).
- Linha 86: Linha em branco.
- Linha 87: Início de `set_password` (aplica hash à senha em texto puro).
- Linha 88: Docstring de `set_password`.
- Linha 89: Gera o hash e armazena em `password_hash`.
- Linha 90: Linha em branco.
- Linha 91: Início de `check_password` (valida senha informada).
- Linha 92: Docstring de `check_password`.
- Linha 93: Verifica o hash com a senha fornecida.
- Linha 94: Linha em branco.
- Linha 95: Início de `__repr__` do admin.
- Linha 96: Retorna representação textual com `username`.
- Linha 97: Linha em branco.
- Linha 98: Linha em branco.
- Linha 99: Define a classe `Configuracao`, herda de `db.Model`.
- Linha 100: Docstring do modelo `Configuracao`.
- Linha 101: Define nome da tabela `configuracoes`.
- Linha 102: Linha em branco.
- Linha 103: Coluna `id` (chave primária, inteiro).
- Linha 104: Coluna `chave` (string até 50, única, obrigatória).
- Linha 105: Coluna `valor` (texto, opcional) — valor da configuração.
- Linha 106: Coluna `descricao` (string até 200, opcional).
- Linha 107: Coluna `data_atualizacao` (DateTime, autualiza automaticamente).
- Linha 108: Linha em branco.
- Linha 109: Início de `__repr__` retornando a chave.
- Linha 110: Retorna representação textual com `chave`.
- Linha 111: Linha em branco.
- Linha 112: Decorador `@staticmethod` para método utilitário.
- Linha 113: Define `get_valor(chave, default=None)`.
- Linha 114: Docstring de `get_valor`.
- Linha 115: Busca primeira configuração com a `chave` informada.
- Linha 116: Retorna o valor ou `default` se não encontrada.
- Linha 117: Linha em branco.
- Linha 118: Decorador `@staticmethod` para método de escrita.
- Linha 119: Define `set_valor(chave, valor, descricao=None)`.
- Linha 120: Docstring de `set_valor`.
- Linhas 121–130: Lê/atualiza ou cria configuração e `commit` no banco; retorna o registro.
- Linha 131: Linha em branco.
- Linha 132: Linha em branco.
- Linha 133: Define a classe `ItemCarrinho`, herda de `db.Model`.
- Linha 134: Docstring do modelo `ItemCarrinho`.
- Linha 135: Define nome da tabela `itens_carrinho`.
- Linha 136: Linha em branco.
- Linha 137: Coluna `id` (chave primária, inteiro).
- Linha 138: Coluna `session_id` (string até 100) — identifica a sessão do usuário.
- Linha 139: Coluna `produto_id` (FK para `produtos.id`, obrigatório).
- Linha 140: Coluna `quantidade` (inteiro, padrão 1).
- Linha 141: Coluna `tamanho` (string até 10, opcional).
- Linha 142: Coluna `data_adicao` (DateTime, padrão agora em UTC).
- Linha 143: Linha em branco.
- Linha 144: Comentário do relacionamento com `Produto`.
- Linha 145: Relacionamento ORM para acessar `produto` a partir do item.
- Linha 146: Linha em branco.
- Linha 147: Início de `__repr__` para item do carrinho.
- Linha 148: Retorna representação com `produto_id` e `quantidade`.
- Linha 149: Linha em branco.
- Linha 150: Início de `to_dict` (serialização do item do carrinho).
- Linha 151: Docstring de `to_dict`.
- Linhas 152–161: Retorna dicionário com dados do item e subtotal calculado.


# Xod-da-Preta-/app/database.py

- Linha 1: Importa `SQLAlchemy` para ORM com Flask.
- Linha 2: Importa `DeclarativeBase` (base declarativa do SQLAlchemy 2.x).
- Linha 3: Linha em branco.
- Linha 4: Define classe base `Base` herdando de `DeclarativeBase`.
- Linha 5: Docstring da classe base.
- Linha 6: `pass` pois não há customização adicional.
- Linha 7: Linha em branco.
- Linha 8: Comentário indicando a instância global.
- Linha 9: Cria `db = SQLAlchemy(model_class=Base)` usando a base customizada.
- Linha 10: Linha em branco.
- Linha 11: Define `init_db(app)` para inicializar o banco com a app Flask.
- Linhas 12–17: Docstring com propósito e argumento da função.
- Linha 18: Comentário de configuração.
- Linha 19: Chama `db.init_app(app)` para vincular a app ao ORM.
- Linha 20: Linha em branco.
- Linha 21: Entra no contexto da aplicação Flask.
- Linha 22: Comentário sobre evitar importação circular.
- Linha 23: Importa modelos após contexto para registrar as tabelas.
- Linha 24: Linha em branco.
- Linha 25: Comentário sobre criação de tabelas.
- Linha 26: Executa `db.create_all()` para criar as tabelas no banco.
- Linha 27: Linha em branco.
- Linha 28: `print` confirmando inicialização do banco.
- Linha 29: Linha em branco.
- Linha 30: Define `get_db()` que retorna a instância do ORM.
- Linhas 31–36: Docstring e retorno da instância `db`.
- Linha 37: Retorna `db`.


# Xod-da-Preta-/app/admin_routes.py

- Linhas 1–3: Docstring do módulo descrevendo rotas do painel administrativo.
- Linha 4: Linha em branco.
- Linha 5: Importa utilitários do Flask usados nas rotas/admin.
- Linha 6: Importa `secure_filename` para nomes seguros de arquivos.
- Linha 7: Importa `wraps` para criar decorator preservando metadados.
- Linha 8: Importa `os` para manipulação de caminhos/extensões.
- Linha 9: Importa `Path` (não é utilizado diretamente neste arquivo; presença é inócua).
- Linha 10: Importa a instância `db` para operações no banco.
- Linha 11: Importa modelos ORM usados no admin.
- Linha 12: Importa configurações globais `Config`.
- Linha 13: Importa `json` para serializar/deserializar listas de tamanhos.
- Linha 14: Linha em branco.
- Linha 15: Comentário introdutório do Blueprint admin.
- Linha 16: Cria `admin_bp` com prefixo de URL `/admin`.
- Linha 17: Linha em branco.
- Linha 18: Comentário sobre proteção de rotas com login.
- Linha 19: Define decorator `login_required` que exige sessão ativa.
- Linha 20: Aplica `@wraps(f)` para manter metadados da função.
- Linhas 21–26: Função interna verifica `session` e redireciona se não logado.
- Linha 27: Linha em branco.
- Linha 28: Comentário sobre função auxiliar de upload.
- Linha 29: Define `allowed_file(filename)`.
- Linha 30: Docstring do verificador de extensão.
- Linhas 31–32: Retorna True se extensão estiver em `ALLOWED_EXTENSIONS`.
- Linha 33: Linha em branco.
- Linha 34: Define `save_product_image(file)` para salvar upload com timestamp.
- Linha 35: Docstring da função de salvar imagem.
- Linhas 36–37: Verifica arquivo e extensão; normaliza nome com `secure_filename`.
- Linha 38: Comentário: adiciona timestamp.
- Linha 39: Import local de `datetime` (evita import global desnecessário).
- Linha 40: Formata timestamp `YYYYMMDDHHMMSS`.
- Linha 41: Separa nome e extensão do arquivo.
- Linha 42: Reconstrói nome com sufixo timestamp.
- Linha 43: Linha em branco.
- Linha 44: Resolve caminho destino dentro de `UPLOAD_FOLDER`.
- Linha 45: Salva arquivo no caminho calculado.
- Linha 46: Retorna nome do arquivo salvo.
- Linha 47: Retorna `None` se arquivo inválido.
- Linha 48: Linha em branco.
- Linhas 49–51: Cabeçalho de seção: Rotas de autenticação.
- Linha 52: Linha em branco.
- Linha 53: Define rota `/login` (GET/POST).
- Linha 54: Define função `login`.
- Linha 55: Docstring da página de login.
- Linhas 56–58: Se já logado, redireciona para `dashboard`.
- Linhas 60–63: Se POST, lê `username` e `password` do formulário.
- Linhas 64–66: Busca admin por username no banco.
- Linhas 67–76: Se encontrou e senha confere, cria sessão e atualiza `ultimo_login` (commit).
- Linhas 78–79: Feedback de sucesso e redireciona ao dashboard.
- Linhas 80–81: Caso contrário, exibe mensagem de erro.
- Linha 83: Renderiza template `admin/login.html` (GET inicial ou erro).
- Linhas 85–90: Rota `/logout` limpa sessão e redireciona ao login.
- Linhas 92–94: Cabeçalho de seção: Dashboard.
- Linhas 96–99: Define rotas `/` e `/dashboard` protegidas por `login_required`.
- Linha 100: Docstring da view `dashboard`.
- Linhas 101–105: Calcula contagens gerais (total/ativos/inativos) via ORM.
- Linhas 106–111: Monta dicionário de contagens por categoria de `Config`.
- Linhas 112–113: Busca últimos 5 produtos por `data_criacao` desc.
- Linhas 115–120: Renderiza `admin/dashboard.html` com métricas e lista.
- Linhas 122–124: Cabeçalho de seção: Gerenciar produtos.
- Linhas 126–131: Rota para listar produtos ordenados; renderiza `admin/produtos.html`.
- Linhas 133–135: Rota para criar produto (GET/POST) protegida.
- Linhas 136–149: Se POST, coleta campos do formulário e converte tipos.
- Linhas 150–153: Lê arquivo de imagem e salva (se houver).
- Linhas 154–167: Instancia `Produto` com dados; serializa tamanhos com `json.dumps`.
- Linhas 169–171: Adiciona à sessão e commita.
- Linhas 172–174: Feedback e redirect para lista de produtos.
- Linhas 175–177: Para GET, carrega subcategorias ativas ordenadas.
- Linhas 178–182: Renderiza `admin/produto_form.html` com opções (novo produto).
- Linhas 184–186: Rota para editar produto existente (GET/POST).
- Linha 187: Docstring da view de edição.
- Linha 188: Busca ou 404 o produto pelo `produto_id`.
- Linhas 190–203: Se POST, atualiza campos, converte tipos e JSON de tamanhos.
- Linhas 204–215: Se nova imagem enviada, remove antiga do disco e salva a nova.
- Linhas 216–219: Commit, feedback e redirect.
- Linhas 221–223: Converte tamanhos salvos para lista para preencher o formulário.
- Linhas 224–226: Carrega subcategorias ativas ordenadas.
- Linhas 227–232: Renderiza form com dados do produto e tamanhos marcados.
- Linhas 234–236: Rota POST para deletar produto; protegida.
- Linhas 237–240: Busca ou 404; guarda nome para mensagem.
- Linhas 241–246: Se houver imagem no disco, apaga o arquivo.
- Linhas 247–249: Remove registro do banco e commita.
- Linha 250: Feedback de exclusão.


# Xod-da-Preta-/app/main.py

- Linha 1: Importa Flask e utilidades de request, session e jsonify.
- Linha 2: Importa `Path` para resolver diretórios.
- Linha 3: Importa `Config` com configurações da aplicação.
- Linha 4: Importa `db` e `init_db` (o segundo não é utilizado diretamente aqui).
- Linha 5: Importa `admin_bp` para registrar o Blueprint do admin.
- Linha 6: Importa `uuid` para gerar IDs de sessão do carrinho.
- Linha 7: Linha em branco.
- Linha 8: Comentário: diretório base.
- Linha 9: Define `BASE_DIR` como pasta do arquivo atual.
- Linha 10: Linha em branco.
- Linhas 11–15: Cria a app Flask com pastas `templates` e `static` resolvidas.
- Linha 16: Linha em branco.
- Linhas 17–19: Carrega configurações da classe `Config` e inicializa aspectos dependentes.
- Linha 20: Linha em branco.
- Linhas 21–22: Inicializa o ORM com a app (`db.init_app`).
- Linha 23: Linha em branco.
- Linhas 24–28: No contexto da app, importa modelos e cria tabelas se não existirem.
- Linha 29: Linha em branco.
- Linha 30: Registra o Blueprint do admin na aplicação.
- Linhas 31–33: Comentários: seção de rotas do site.
- Linha 34: Linha em branco.
- Linhas 35–38: Rota `/` que renderiza `index.html`.
- Linhas 40–43: Rota `/about` que renderiza `about.html`.
- Linhas 45–48: Rota `/contact` que renderiza `contact.html`.
- Linhas 50–85: Rota `/shop` com filtros hierárquicos (categoria, subcategoria, tipo, preço) e renderiza `shop.html` com `hierarchy` de `Config` e subcategorias legadas.
  - Inclui construção de query base com `Produto.query.filter_by(ativo=True)` e encadeamentos condicionais por filtro.
- Linhas 87–106: Rota `/shop/<int:produto_id>` para página de produto; busca produto e até 4 relacionados da mesma categoria.
- Linhas 108–113: Seção de carrinho — utilitário `get_session_id()` cria/retorna um UUID na sessão.
- Linhas 115–125: Rota `/carrinho` que busca itens do carrinho da sessão e calcula total; renderiza `carrinho.html`.
- Linhas 127–170: Rota `POST /api/carrinho/adicionar` que valida entrada, garante produto ativo, agrega quantidade se item já existir (por tamanho) e retorna JSON com total de itens.
  - Usa `db.session.query(db.func.sum(...))` para somar quantidades.
- Linhas 172–198: Rota `DELETE /api/carrinho/remover/<int:item_id>` que remove item da mesma sessão e retorna contagem atualizada; rollback em exceções.
- Linhas 200–230: Rota `PUT /api/carrinho/atualizar/<int:item_id>` que ajusta quantidade, retorna subtotal do item e total de itens; rollback em exceções.
- Linhas 232–241: Rota `GET /api/carrinho/total` que retorna somente `total_itens` da sessão ativa.
- Linhas 243–251: Filtro Jinja `currency` para formatar valores como BRL (R$) com substituições de separadores.
- Linhas 253–261: Filtro Jinja `from_json` para converter string JSON em lista (ou lista vazia em caso de erro).
- Linhas 263–275: Context processor `inject_global_vars` injeta configurações gerais (nome, telefone, email, instagram) obtidas de `Configuracao` no contexto de todos os templates.
- Linhas 277–283: Execução da aplicação (debug) quando chamado diretamente (`__main__`).


# Xod-da-Preta-/app/config.py

- Linha 1: Importa `os` para acessar variáveis de ambiente.
- Linha 2: Importa `Path` para manipulação de caminhos.
- Linha 3: Importa `load_dotenv` para carregar `.env`.
- Linha 4: Linha em branco.
- Linha 5: Comentário: carregar variáveis de ambiente.
- Linha 6: Chama `load_dotenv()` para popular `os.environ` com o `.env` se existir.
- Linha 7: Linha em branco.
- Linha 8: Comentário: diretório base do projeto.
- Linha 9: Define `BASE_DIR` como pasta do arquivo atual.
- Linha 10: Linha em branco.
- Linha 11: Define a classe `Config` para agrupar configurações.
- Linha 12: Docstring da classe de configuração.
- Linha 13: Linha em branco.
- Linhas 14–15: Define `SECRET_KEY` com fallback de desenvolvimento.
- Linhas 17–18: Define URI do banco SQLite em arquivo `loja.db`; desativa track modifications.
- Linhas 20–22: Configurações de upload de imagens (pasta, tamanho máximo, extensões permitidas).
- Linhas 24–25: Configurações padrão do admin vindas do ambiente (ou fallback).
- Linhas 27–28: Paginação de produtos por página.
- Linhas 30–31: Lista de categorias disponíveis.
- Linhas 33–39: Hierarquia de categorias com 3 níveis para `Roupas`.
- Linhas 41–41: Comentário sobre categorias sem hierarquia.
- Linhas 43–43: Comentário: tamanhos disponíveis.
- Linha 44: Lista de tamanhos, incluindo `Único` (acentuação aparece corrompida no arquivo).
- Linha 45: Linha em branco.
- Linhas 46–51: `init_app(app)` — cria pastas de uploads e `instance` caso não existam.


# Xod-da-Preta-/app/populate_products.py

- Linhas 1–3: Docstring do script explicando uso (popular banco com exemplos).
- Linha 4: Linha em branco.
- Linha 5: Importa `app` da `main` para contexto de aplicação.
- Linha 6: Importa `db` para operações no banco.
- Linha 7: Importa o modelo `Produto`.
- Linha 8: Importa `json` para serializar tamanhos.
- Linha 9: Linha em branco.
- Linha 10: Define `limpar_produtos_exemplo()` para remover produtos de exemplo anteriores.
- Linha 11: Docstring explicativa.
- Linha 12: `print` indicando início da limpeza.
- Linha 13: Query de deleção filtrando `descricao` com marcador de exemplo.
- Linha 14: `db.session.commit()` para efetivar remoção.
- Linha 15: `print` confirmando remoção (string contém caracteres corrompidos, mas intenção é confirmar).
- Linha 16: Linha em branco.
- Linha 17: Define `criar_produtos_exemplo()` que insere vários produtos.
- Linha 18: Docstring do criador de exemplos.
- Linha 19: Linha em branco.
- Linhas 20–151: Lista `produtos_exemplo` com dicionários de produtos variados (Colares, Anéis, Pulseiras, Brincos, Roupas). Campos: `nome`, `descricao`, `preco`, `categoria`, `tamanhos` (JSON), `ativo`, `ordem`.
- Linha 153: `print` indicando quantos produtos serão criados.
- Linhas 155–159: Loop: instancia `Produto` com `**produto_data`, adiciona à sessão, imprime cada inserção (strings com caracteres corrompidos, mas informativas).
- Linha 161: `db.session.commit()` para gravar no banco.
- Linha 162: `print` confirmando quantidade total criada.
- Linha 164: Linha em branco.
- Linha 165: Define `mostrar_estatisticas()` para imprimir métricas do banco.
- Linha 166: Docstring explicativa.
- Linhas 167–169: Prints de cabeçalho formatado.
- Linhas 171–172: Calcula total e ativos via ORM.
- Linhas 174–176: Imprime totais.
- Linha 178: Lista de categorias para somatório.
- Linhas 179–181: Loop nas categorias imprimindo contagem por `filter_by`.
- Linha 183: Print de rodapé.
- Linha 185: Linha em branco.
- Linhas 186–193: Bloco `if __name__ == '__main__'`: título do script e instruções.
- Linhas 195–206: Abre `app.app_context()`, pergunta se deseja limpar, chama criação e mostra estatísticas.


# Xod-da-Preta-/app/setup_inicial.py

- Linhas 1–6: Docstring do script de setup inicial; alerta sobre apagar dados.
- Linha 7: Linha em branco.
- Linha 8: Importa `app` do módulo `main`.
- Linha 9: Importa `db` para operações de banco.
- Linha 10: Importa modelos `Produto`, `Admin`, `Configuracao`.
- Linha 11: Importa `json` para serializar tamanhos de produtos iniciais.
- Linha 12: Linha em branco.
- Linha 13: Define `init_database()` para recriar o esquema e dados padrão.
- Linha 14: Docstring da função de init.
- Linha 15: Linha em branco.
- Linhas 16–18: Entra no `app.app_context()` para executar operações de banco.
- Linha 19: `print` informando remoção de tabelas antigas.
- Linha 20: `db.drop_all()` apaga todas as tabelas.
- Linha 22: `print` informando criação de tabelas.
- Linha 23: `db.create_all()` recria o esquema.
- Linha 25: `print` informando criação de admin padrão.
- Linhas 26–31: Cria `Admin` com username/email, define senha hash e adiciona à sessão.
- Linha 33: `print` informando criação das configurações da loja.
- Linhas 34–40: Define tuplas `(chave, valor, descricao)` de configurações iniciais.
- Linhas 42–44: Loop: cria instâncias `Configuracao` e adiciona à sessão.
- Linha 46: `print` sobre criação de produtos de exemplo.
- Linhas 47–93: Lista `produtos_exemplo` com alguns produtos iniciais (Brincos, Roupas, Colares) com `imagem` definida.
- Linhas 95–97: Loop: cria `Produto` e adiciona à sessão.
- Linha 99: `print` informando salvamento no banco.
- Linha 100: `db.session.commit()` persiste todas as alterações.
- Linhas 102–108: Prints de resumo do que foi criado e instruções (alguns caracteres corrompidos).
- Linha 110: Linha em branco.
- Linhas 111–131: Bloco `if __name__ == '__main__'` com título, alerta, lista do que será feito e pergunta de confirmação.
- Linhas 133–141: Se usuário confirma, chama `init_database()` e imprime próximos passos; senão, cancela.

